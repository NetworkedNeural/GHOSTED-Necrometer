<div class="flex flex-col h-full items-center justify-between text-center p-4 rounded-lg bg-gray-800/20 border-2 border-[var(--color-primary-500)]/20">
  
  <div class="w-full">
    <h2 class="text-xl font-bold text-[var(--color-primary-400)] mb-4 border-b border-[var(--color-primary-500)]/20 pb-2">Chrono-Scan</h2>
    <p class="text-sm text-gray-400 mb-4">Detect and analyze residual temporal echoes.</p>
  </div>
  
  <div class="flex-grow w-full flex items-center justify-center">
    @switch (state()) {
      @case ('idle') {
        <div class="flex flex-col items-center">
          <svg class="w-16 h-16 text-gray-600 mb-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
          <p class="text-gray-400">Ready to scan for temporal activity.</p>
          <p class="text-xs text-yellow-400 mt-1">Scan Cost: {{ scanCost }} NC</p>
        </div>
      }
      @case ('scanning') {
         <div class="flex flex-col items-center text-teal-300">
           <svg class="animate-spin h-12 w-12 mb-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
          </svg>
          <p class="font-bold text-lg animate-pulse">SCANNING TIMELINES...</p>
        </div>
      }
      @case ('error') {
        <div class="flex flex-col items-center justify-center text-center p-4 bg-red-900/30 rounded-lg border border-red-500/50">
           <svg class="w-12 h-12 text-red-400 mb-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" />
          </svg>
          <p class="text-lg text-red-300">Scan Failed</p>
          <p class="text-sm text-gray-300">{{ error() }}</p>
        </div>
      }
      @case ('result') {
        @if (echo(); as e) {
          <div class="w-full text-left p-4 bg-black/30 rounded-lg border border-gray-600 animate-fade-in">
            <p class="text-sm text-gray-400 uppercase tracking-widest">{{ e.era }} Era</p>
            <h3 class="text-2xl font-bold text-[var(--color-primary-300)] mt-1 mb-2">{{ e.title }}</h3>
            <p class="text-gray-300 leading-relaxed">{{ e.description }}</p>
          </div>
        }
      }
    }
  </div>

  <div class="w-full pt-4">
     @if (state() === 'idle') {
      <button (click)="scanForEcho()" class="w-full bg-[var(--color-primary-700)] hover:bg-[var(--color-primary-600)] text-white font-bold py-3 px-4 rounded-lg transition-colors">
        Initiate Chrono-Scan
      </button>
    } @else {
      <button (click)="reset()" class="w-full bg-gray-600 hover:bg-gray-500 text-white font-bold py-3 px-4 rounded-lg transition-colors">
        Scan Again
      </button>
    }
  </div>

</div>
<style>
  .animate-fade-in {
    animation: fadeIn 0.5s ease-in-out;
  }
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }
</style>